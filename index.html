<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Why Am I So Tired?</title>
  <style>
    body {
      font-family: "Inter", -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #c8dafc, #c9e7e2);
      margin: 0;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      color: #333;
    }

    .container {
      background: #fff;
      margin-top: 40px;
      padding: 2.5rem;
      border-radius: 20px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
      max-width: 700px;
      width: 100%;
      text-align: center;
      animation: fadeIn 0.5s ease;
    }

    h1 {
      color: #2a3a63;
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .subtitle {
      font-size: 1.1rem;
      color: #4a5b7d;
      margin-bottom: 1rem;
      line-height: 1.5;
    }

    .brand {
      font-size: 0.9rem;
      color: #6a7ca0;
      margin-bottom: 1.5rem;
      font-weight: 600;
    }

    img.logo {
      width: 80px;
      height: auto;
      margin-bottom: 1rem;
      display: none;
    }

    .benefits {
      background: linear-gradient(135deg, #e8ecff 0%, #dae7ff 100%);
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 2rem;
    }

    .benefit {
      display: flex;
      align-items: flex-start;
      margin-bottom: 1rem;
      text-align: left;
    }

    .benefit:last-child {
      margin-bottom: 0;
    }

    .checkmark {
      width: 24px;
      height: 24px;
      background: #233DFF;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 14px;
      margin-right: 12px;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .benefit-text {
      color: #4a5b7d;
      line-height: 1.6;
    }

    .disclaimer {
      text-align: center;
      font-size: 0.85rem;
      color: #6a7ca0;
      margin-top: 1rem;
    }

    .progress-container {
      margin-bottom: 2rem;
    }

    .progress-text {
      display: flex;
      justify-content: space-between;
      font-size: 0.85rem;
      color: #6a7ca0;
      margin-bottom: 0.5rem;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: #e5e7eb;
      border-radius: 999px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #233DFF 0%, #56AEFF 100%);
      transition: width 0.3s ease;
      border-radius: 999px;
    }

    button {
      background: linear-gradient(135deg, #233DFF 0%, #56AEFF 100%);
      color: white;
      border: none;
      padding: 0.9rem 1.5rem;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(35, 61, 255, 0.3);
      width: 100%;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(35, 61, 255, 0.4);
    }

    .question {
      margin: 2rem 0;
      text-align: left;
    }

    .question h2 {
      color: #2a3a63;
      font-size: 1.5rem;
      margin-bottom: 1.5rem;
      line-height: 1.4;
    }

    .answers label {
      display: block;
      background-color: #f2f5ff;
      margin: 0.7rem 0;
      padding: 1rem;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      border: 2px solid transparent;
    }

    .answers label:hover {
      background-color: #e4ecff;
      border-color: #233DFF;
    }

    .answers input[type="radio"] {
      margin-right: 0.8rem;
    }

    .hidden {
      display: none;
    }

    .result {
      text-align: left;
    }

    .result h2 {
      color: #2a3a63;
      font-size: 1.8rem;
      margin-bottom: 1.5rem;
      text-align: center;
    }

    .score-box {
      background: linear-gradient(135deg, #e8ecff 0%, #dae7ff 100%);
      border-radius: 12px;
      padding: 2rem;
      margin-bottom: 2rem;
      text-align: center;
    }

    .score-label {
      font-size: 0.9rem;
      color: #6a7ca0;
      margin-bottom: 0.5rem;
    }

    .score-number {
      font-size: 3rem;
      font-weight: bold;
      color: #2a3a63;
    }

    .score-number span {
      font-size: 1.5rem;
      color: #6a7ca0;
    }

    .score-status {
      font-size: 1.1rem;
      font-weight: 600;
      margin-top: 0.5rem;
    }

    .drainers-title {
      font-size: 1.3rem;
      font-weight: bold;
      color: #2a3a63;
      margin-bottom: 0.5rem;
    }

    .drainers-subtitle {
      color: #6a7ca0;
      margin-bottom: 1.5rem;
      font-size: 0.95rem;
    }

    .drainer-item {
      display: flex;
      align-items: center;
      padding: 1rem;
      background: #f9fafb;
      border-radius: 8px;
      margin-bottom: 1rem;
    }

    .drainer-content {
      flex: 1;
    }

    .drainer-name {
      font-weight: 600;
      color: #2a3a63;
      margin-bottom: 0.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .drainer-score {
      font-size: 1.1rem;
      font-weight: bold;
      color: #6a7ca0;
    }

    .drainer-bar {
      width: 100%;
      height: 8px;
      background: #e5e7eb;
      border-radius: 999px;
      overflow: hidden;
    }

    .drainer-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, #233DFF 0%, #56AEFF 100%);
      border-radius: 999px;
    }

    .insight-box {
      background: linear-gradient(135deg, #e8ecff 0%, #dae7ff 100%);
      border-radius: 12px;
      padding: 1.5rem;
      margin: 1.5rem 0;
    }

    .insight-title {
      font-size: 1.2rem;
      font-weight: bold;
      color: #2a3a63;
      margin-bottom: 0.8rem;
    }

    .insight-text {
      color: #4a5b7d;
      line-height: 1.7;
    }

    .cta-section {
      text-align: center;
      margin-top: 2rem;
      padding-top: 2rem;
      border-top: 2px solid #e5e7eb;
    }

    .cta-title {
      font-size: 1.5rem;
      font-weight: bold;
      color: #2a3a63;
      margin-bottom: 0.8rem;
    }

    .cta-description {
      color: #6a7ca0;
      margin-bottom: 1.5rem;
      line-height: 1.6;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @media (max-width: 640px) {
      .container {
        padding: 1.5rem;
      }

      h1 {
        font-size: 1.7rem;
      }

      .question h2 {
        font-size: 1.3rem;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <img src="https://raw.githubusercontent.com/WholeWellBeing/energy-quiz/main/logo.png" alt="Whole Well Being Logo" class="logo" id="logo" />
    
    <!-- Welcome Stage -->
    <div id="welcome-stage">
      <h1>Why Am I So Tired?</h1>
      <p class="subtitle">Discover what's draining your energy and get your personalized insights to start reclaiming your vitality</p>
      <p class="brand">From Whole Well Being Lifestyle Medicine</p>

      <div class="benefits">
        <div class="benefit">
          <div class="checkmark">✓</div>
          <div class="benefit-text">12 quick questions about your daily habits and energy patterns</div>
        </div>
        <div class="benefit">
          <div class="checkmark">✓</div>
          <div class="benefit-text">Identify your biggest energy drainers across the 6 pillars of lifestyle medicine</div>
        </div>
        <div class="benefit">
          <div class="checkmark">✓</div>
          <div class="benefit-text">Get instant results plus your free Energy Reset Blueprint</div>
        </div>
      </div>

      <button id="start-btn">Start Energy Assessment</button>
      <p class="disclaimer">Takes less than 3 minutes • 100% Free</p>
    </div>

    <!-- Quiz Stage -->
    <div id="quiz-stage" class="hidden">
      <div class="progress-container">
        <div class="progress-text">
          <span id="pillar-name"></span>
          <span id="question-counter"></span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill"></div>
        </div>
      </div>
      
      <div id="question-container"></div>
      <button id="next-btn">Next</button>
    </div>

    <!-- Results Stage -->
    <div id="result" class="hidden result"></div>
  </div>

  <script>
    const quizData = [
      {
        pillar: 'Sleep',
        question: "How many hours of quality sleep do you typically get per night?",
        options: [
          { text: "Less than 5 hours", score: { sleep: 1 } },
          { text: "5-6 hours", score: { sleep: 3 } },
          { text: "6-7 hours", score: { sleep: 6 } },
          { text: "7-8 hours", score: { sleep: 9 } },
          { text: "8+ hours", score: { sleep: 10 } }
        ]
      },
      {
        pillar: 'Sleep',
        question: "How would you rate your sleep quality?",
        options: [
          { text: "Wake up exhausted", score: { sleep: 2 } },
          { text: "Not very rested", score: { sleep: 4 } },
          { text: "Somewhat rested", score: { sleep: 6 } },
          { text: "Pretty well rested", score: { sleep: 8 } },
          { text: "Wake up refreshed", score: { sleep: 10 } }
        ]
      },
      {
        pillar: 'Nutrition',
        question: "How often do you eat processed or packaged foods?",
        options: [
          { text: "Most meals", score: { nutrition: 2 } },
          { text: "About half of my meals", score: { nutrition: 5 } },
          { text: "Occasionally (a few times per week)", score: { nutrition: 8 } },
          { text: "Rarely (once a week or less)", score: { nutrition: 10 } }
        ]
      },
      {
        pillar: 'Nutrition',
        question: "How would you describe your eating patterns?",
        options: [
          { text: "Irregular meals, lots of processed foods", score: { nutrition: 2 } },
          { text: "Trying to eat well but inconsistent", score: { nutrition: 5 } },
          { text: "Regular balanced meals most days", score: { nutrition: 8 } },
          { text: "Consistent whole-food based meals", score: { nutrition: 10 } }
        ]
      },
      {
        pillar: 'Movement',
        question: "How many days per week do you get at least 20 minutes of physical activity?",
        options: [
          { text: "0-1 days", score: { movement: 1 } },
          { text: "2-3 days", score: { movement: 4 } },
          { text: "4-5 days", score: { movement: 7 } },
          { text: "6-7 days", score: { movement: 10 } }
        ]
      },
      {
        pillar: 'Movement',
        question: "How energized do you feel after physical activity?",
        options: [
          { text: "More exhausted", score: { movement: 2 } },
          { text: "Still tired", score: { movement: 4 } },
          { text: "Neutral", score: { movement: 6 } },
          { text: "Somewhat energized", score: { movement: 8 } },
          { text: "Energized & alive", score: { movement: 10 } }
        ]
      },
      {
        pillar: 'Stress',
        question: "How often do you feel calm and balanced (versus stressed)?",
        options: [
          { text: "Rarely calm", score: { stress: 2 } },
          { text: "Occasionally calm", score: { stress: 4 } },
          { text: "Sometimes calm", score: { stress: 6 } },
          { text: "Often calm", score: { stress: 8 } },
          { text: "Usually calm", score: { stress: 10 } }
        ]
      },
      {
        pillar: 'Stress',
        question: "Do you practice any stress-reduction techniques regularly?",
        options: [
          { text: "No, I don't have time", score: { stress: 1 } },
          { text: "Occasionally when I remember", score: { stress: 4 } },
          { text: "A few times per week", score: { stress: 7 } },
          { text: "Daily practice", score: { stress: 10 } }
        ]
      },
      {
        pillar: 'Connection',
        question: "How connected do you feel to supportive relationships?",
        options: [
          { text: "Isolated & alone", score: { connection: 2 } },
          { text: "Somewhat disconnected", score: { connection: 4 } },
          { text: "Moderately connected", score: { connection: 6 } },
          { text: "Well connected", score: { connection: 8 } },
          { text: "Deeply connected", score: { connection: 10 } }
        ]
      },
      {
        pillar: 'Substances',
        question: "How much caffeine do you consume daily?",
        options: [
          { text: "None", score: { substances: 10 } },
          { text: "1-2 cups of coffee/tea", score: { substances: 8 } },
          { text: "3-4 cups", score: { substances: 5 } },
          { text: "5+ cups or energy drinks", score: { substances: 2 } }
        ]
      },
      {
        pillar: 'Substances',
        question: "How often do you use alcohol or other substances?",
        options: [
          { text: "Never or rarely", score: { substances: 10 } },
          { text: "1-2 times per week", score: { substances: 7 } },
          { text: "3-5 times per week", score: { substances: 4 } },
          { text: "Daily", score: { substances: 1 } }
        ]
      },
      {
        pillar: 'Nature',
        question: "How much time do you spend outdoors each week?",
        options: [
          { text: "Almost none - mostly indoors", score: { nature: 1 } },
          { text: "Less than 1 hour", score: { nature: 4 } },
          { text: "1-3 hours", score: { nature: 7 } },
          { text: "3+ hours", score: { nature: 10 } }
        ]
      }
    ];

    let currentQuestion = 0;
    let totalScores = { sleep: 0, nutrition: 0, movement: 0, stress: 0, connection: 0, substances: 0, nature: 0 };
    let quizStarted = false;

    function startQuiz() {
      if (quizStarted) return;
      quizStarted = true;
      document.getElementById('welcome-stage').classList.add('hidden');
      document.getElementById('quiz-stage').classList.remove('hidden');
      showQuestion();
    }

    function showQuestion() {
      if (!quizStarted) return;
      const q = quizData[currentQuestion];
      const questionContainer = document.getElementById("question-container");
      
      document.getElementById('pillar-name').textContent = q.pillar;
      document.getElementById('question-counter').textContent = `Question ${currentQuestion + 1} of ${quizData.length}`;
      const progress = ((currentQuestion + 1) / quizData.length) * 100;
      document.getElementById('progress-fill').style.width = progress + '%';

      questionContainer.innerHTML = `
        <div class="question">
          <h2>${q.question}</h2>
          <div class="answers">
            ${q.options.map((opt, i) => `
              <label>
                <input type="radio" name="q${currentQuestion}" value="${i}" />
                ${opt.text}
              </label>
            `).join("")}
          </div>
        </div>
      `;
    }

    function calculateScores() {
      const pillars = ['sleep', 'nutrition', 'movement', 'stress', 'connection', 'substances', 'nature'];
      const pillarScores = {};
      
      pillars.forEach(pillar => {
        const pillarQuestions = quizData.filter(q => {
          const firstOption = q.options[0];
          return firstOption.score.hasOwnProperty(pillar);
        });
        
        const questionCount = pillarQuestions.length;
        const pillarTotal = totalScores[pillar] || 0;
        pillarScores[pillar] = questionCount > 0 ? Math.round(pillarTotal / questionCount) : 0;
      });
      
      return pillarScores;
    }

    function getEnergyLevel(score) {
      if (score >= 8) return { label: 'High Energy Potential', color: '#10b981' };
      if (score >= 6) return { label: 'Moderate Energy', color: '#f59e0b' };
      if (score >= 4) return { label: 'Low Energy', color: '#f97316' };
      return { label: 'Energy Crisis', color: '#ef4444' };
    }

    function calculateResults() {
      const pillarScores = calculateScores();
      const sortedScores = Object.entries(pillarScores).sort((a, b) => a[1] - b[1]);
      const overallScore = Math.round(Object.values(pillarScores).reduce((a, b) => a + b, 0) / Object.keys(pillarScores).length);
      const energyLevel = getEnergyLevel(overallScore);
      
      const pillarNames = {
        sleep: 'Sleep',
        nutrition: 'Nutrition',
        movement: 'Movement',
        stress: 'Stress Management',
        connection: 'Social Connection',
        substances: 'Substance Use',
        nature: 'Nature Exposure'
      };

      let drainersList = '';
      sortedScores.slice(0, 3).forEach(([pillar, score]) => {
        drainersList += `
          <div class="drainer-item">
            <div class="drainer-content">
              <div class="drainer-name">
                <span>${pillarNames[pillar]}</span>
                <span class="drainer-score">${score}/10</span>
              </div>
              <div class="drainer-bar">
                <div class="drainer-bar-fill" style="width: ${score * 10}%"></div>
              </div>
            </div>
          </div>
        `;
      });

      const resultContainer = document.getElementById("result");
      resultContainer.innerHTML = `
        <h2>Your Energy Assessment Results</h2>
        
        <div class="score-box">
          <div class="score-label">Your Overall Energy Score</div>
          <div class="score-number">${overallScore}<span>/10</span></div>
          <div class="score-status" style="color: ${energyLevel.color}">${energyLevel.label}</div>
        </div>

        <h3 class="drainers-title">Your Top Energy Drainers</h3>
        <p class="drainers-subtitle">These areas are impacting your energy the most:</p>
        
        ${drainersList}

        <div class="insight-box">
          <h3 class="insight-title">The Good News</h3>
          <p class="insight-text">Small improvements in these areas can have a profound impact on your daily energy. The 6 pillars of lifestyle medicine (nutrition, physical activity, sleep, stress management, social connection, and substance use) work together synergistically—when you improve one, the others often follow. Your personalized results show you exactly where to start.</p>
        </div>

        <div class="cta-section">
          <h3 class="cta-title">Get Your Free Energy Reset Blueprint</h3>
          <p class="cta-description">Receive actionable, evidence-based strategies to reclaim your energy through the proven principles of lifestyle medicine.</p>
          <a href="https://www.wholewellbeinglm.com/9e075d29-0d41-4f5d-bd40-4a79d6d2e912" target="_blank">
            <button>Get My Blueprint</button>
          </a>
        </div>
      `;
      resultContainer.classList.remove("hidden");
    }

    document.addEventListener('DOMContentLoaded', function() {
      const startButton = document.getElementById("start-btn");
      const nextButton = document.getElementById("next-btn");
      const logoImg = document.getElementById("logo");

      startButton.addEventListener("click", startQuiz);

      nextButton.addEventListener("click", function() {
        const selected = document.querySelector(`input[name="q${currentQuestion}"]:checked`);
        if (!selected) {
          alert("Please choose an answer before continuing.");
          return;
        }

        const answer = quizData[currentQuestion].options[selected.value];
        for (let key in answer.score) {
          totalScores[key] = (totalScores[key] || 0) + answer.score[key];
        }

        currentQuestion++;
        if (currentQuestion < quizData.length) {
          showQuestion();
        } else {
          document.getElementById("quiz-stage").classList.add("hidden");
          calculateResults();
        }
      });

      if (logoImg) {
        logoImg.onerror = function() {
          this.style.display = 'none';
        };
        logoImg.onload = function() {
          this.style.display = 'block';
        };
      }
    });
  </script>
</body>
</html>
